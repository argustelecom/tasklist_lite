### Виджет прикрепления файлов к объекту
...
Визуально виджет представляет собой список прикрепленных файлов и инструменты прикрепления этих файлов.
Файлы прикрепляются к конкретному объекту, сам объект идентифицируется виджетом по ID.

единственный входной параметр это objectId - тот самый объект к которому серверная часть д.б.
прикрепить вложенные файлы. Объект идентифицирующийся по данному ID д.б. потомком SuperClass (требование серверного API)

В зависимости от платформы меняется вид контрола кнопки прикрепления вложения.

### Принцип работы

Виджет кроссплатформенный.
При переходе на страницу вложения НА ТЕКУЩИЙ МОМЕНТ происходит такой сценарий:
1. Инициализируется начальный список вложений по объекту, то есть список вложений которые НА ТЕКУЩИЙ
МОМЕНТ привязаны к объекту. Рендерится.
2. При изменении списка вложений(прикрепление/удаление) происходит перечитывание изначального списка.
3. При попытке скачать отдельное вложение оно моментально скачивается, так как само содержание файла уже
загружено в пп. (1). Дополнительных запросов не выполняется.

Как должно быть:
1. Инициализируется начальный список вложений по объекту, при этом запрашиваемый список имеет урезанный формат,
то есть вложения списка содержат минимум информации, изображения представлены не полноценным файлом, а пережатой копией
меньшего размера - только тот минимум, что нужен для формирования списка на UI клиента
2. При изменении списка вложений(прикрепление/удаление) происходит перечитывание изначального списка из пп. (1)
3. При попытке скачать отдельное вложение или получить по нему детальное представление, выполняется дополнительный запрос на СП для получения
этой самой детальной информации, а также полноценного (не пережатого) файла

### .utils/FileManager
- необходимое зло. Так как для flutter web и flutter mobile взаимодействие с
файловой системой производится по разному, было необходимо использовать не кросплатформенные библиотеки
что привело к тому, что проект перестал собираться, так как импорт либ валидируется в compile-time.
Потому пришлось использовать ветвление логики при подключении некоторых пакетов (см. секцию import в FileManager),
а саму реализацию работы с файлами разносить по разным классам.



### Незакрытые вопросы
1. Не доделаны запросы в сторону сервера, в которых предполагается использование мутаций (+ не сделана серверная часть под мутации)
2. Передача содержимого файла осуществляется в виде String-строки, в которой располагается байтовая последовательность, конвертированаая в Base64. GrapgQL не приспособлен для передачи файлов, о чем создатели сами заявляют. Тут нужно подумать в сторону REST клиента (REST-сервис уже имеется на СП )
3. По макету:
   * Кнопка добавления файла не блокирует при нажатии остальную часть виджета
   * список файлов на WEB не представлен на плиточной основе, а используется одноколоночный список, как и для мобилы
   * прогрессбары при прикладывании сейчас просто дефолтный CircleProgressbar, по макету там д.б. что-то имитирующее уже приложенный аттач
   * ...
4. Не все атрибуты object_attach перенесены с сервера (за тем смыслом, что не используются)
5. Персистенция не реализована, список файйлов всегда подтягивается по новой (нужно хотя бы кеширование)
6. в TA (и в REST-сервисе ТА) была реализована функция передачи уменьшенного изображения, это позволяло экономить траффик, тут нужно сделать также
7. при реализации (6) при клике по прикрепленному файлу должен выполняться запрос на получение содержимого файла (это уже реализовано, но заколочено, так как при формировани списка тянем и содержимое файла, см. 6)
8. Фикстуры, как их вообще для обмена файлов делать?

